<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-05b8c18cdbe0b397.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-2043948c1246ba90.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9538641435026bd3.js" defer=""></script><script src="/_next/static/chunks/pages/linux/users-52bacc78b2156a3e.js" defer=""></script><script src="/_next/static/LUG9vo4cHsjOtBLj04oqM/_buildManifest.js" defer=""></script><script src="/_next/static/LUG9vo4cHsjOtBLj04oqM/_ssgManifest.js" defer=""></script></head><body><div id="__next"><h1>Основные понятия</h1>
<h2>Данные о пользователях</h2>
<ul>
<li>ОС Linux идентифицирует пользователей с помощью UID (User ID).</li>
<li>Пользователь с UID 0 - это root, администратор (суперпользователь) системы.</li>
<li>Каждый пользователь состоит в какой-либо группе пользователей (primary group, main group).</li>
<li>Каждый пользователь может состоять в любом количестве дополнительных групп пользователей (secondary groups, supplementary groups).</li>
<li>ОС Linux идентифицируют группы пользователей с помощью GID (Group ID).</li>
</ul>
<p>Команда <code>id</code> показывает UID, GID, и дополнительные группы пользователя.</p>
<p>Файлы, хранящие информацию о пользователях Linux:</p>
<ul>
<li>
<p>/etc/passwd - сведения о пользователях</p>
<ul>
<li>
<p>имя пользователя</p>
</li>
<li>
<p>пароль пользователя. В ранних версиях Linux и UNIX пароли хранились в незашифрованном виде</p>
</li>
<li>
<p>UID пользователя</p>
</li>
<li>
<p>GID основной группы пользователя</p>
</li>
<li>
<p>описание пользователя - опциональная строка с общей информацией о пользователе (ФИО, контактные данные и т.п.)</p>
</li>
<li>
<p>домашний каталог</p>
</li>
<li>
<p>оболочка</p>
<ul>
<li>путь к оболочке (например /bin/bash)</li>
<li>несуществующий путь или /bin/false или /bin/nologin блокируют интерактивную работу пользователя. Эти значения используются для ограничения прав приложений.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>/etc/group - сведения о группах пользователей, а также о том, в каких дополнительных группах состоит пользователь.</p>
<ul>
<li>имя группы</li>
<li>пароль группы. В ранних версиях Linux и UNIX пароли хранились в незашифрованном виде</li>
<li>GID группы</li>
<li>члены группы</li>
</ul>
</li>
<li>
<p>/etc/shadow - криптографические хеши паролей пользователей</p>
</li>
<li>
<p>/etc/gshadow - криптографические хеши паролей групп пользователей</p>
</li>
<li>
<p>/etc/skel - шаблон для создания домашнего каталога пользователя</p>
</li>
</ul>
<p>Команды для управления пользователями</p>
<p><code>useradd</code> - добавление пользователя
<code>userdel</code> - удаление пользователя
<code>usermod</code> - модификация пользователя
<code>adduser</code> - интерактивное добавление пользователя
<code>passwd</code> - смена пароля пользователя</p>
<p><code>groupadd</code> - добавление группы
<code>groupmod</code> - изменение группы
<code>groupdel</code> - удаление группы
<code>addgroup</code> - интерактивное добавление группы.
<code>gpasswd</code> - смена пароль группы</p>
<h2>Стандартная система прав доступа к файлам</h2>
<p>Для назначения прав доступа к файлам служит программа <code>chmod</code></p>
<p>Права:</p>
<ul>
<li>Read - 4</li>
<li>Write - 2</li>
<li>eXecute - 1 (выполнение программы или вход в каталог)</li>
</ul>
<p>Субъекты:</p>
<ul>
<li>владелец файла (User)</li>
<li>группа файла (Group)</li>
<li>остальные (Other)</li>
</ul>
<p>Примеры:</p>
<p><code>chmod 777 test</code>
<code>chmod 644 test</code> — типичная маска для обычных файлов
<code>chmod 664 test</code> — типичная маска для обычных файлов
<code>chmod 755 test</code> — типичная маска для каталогов и исп.файлов
<code>chmod 775 test</code> — типичная маска для каталогов и исп.файлов</p>
<p>Модифицирующий синтаксис chmod:</p>
<ul>
<li>Субъект<!-- -->
<ul>
<li>all (a)</li>
<li>user (u)</li>
<li>group (g)</li>
<li>other (o)</li>
</ul>
</li>
<li>Действие<!-- -->
<ul>
<li>разрешение (+)</li>
<li>запрет (-)</li>
</ul>
</li>
<li>Право<!-- -->
<ul>
<li>read (r)</li>
<li>write (w)</li>
<li>execute (x) — разрешает запуск программы либо вход в каталог</li>
</ul>
</li>
</ul>
<p>Примеры:</p>
<p><code>chmod +x test_file</code>
<code>chmod o-x test_file</code></p>
<p>umask - 644, 755 — показывает / изменяет маску прав доступа для вновь создаваемых файлов</p>
<p>Специальные права доступа:</p>
<ul>
<li>SUID (4) - при запуске программы она работает от владельца</li>
<li>SGID (2) - при запуске программы она работает от группы</li>
<li>Sticky (1) - внутри каталога удалить файл/каталог может только его владелец</li>
</ul>
<p>ACL - Access Control List - списки доступа к файлам, обеспечивающие точную настройку прав доступа
SELinux (RHEL, CentOS, Oracle, Amazon Linux) / AppArmor (Ubuntu, SLES, Debian) — Mandatory Access Control (MAC) система безопасности Linux
Команда sudo
sudo - выполнить команду от имени суперпользователя (или другого пользователя)
/etc/sudoers
/etc/sudoers.d
visudo - вариант текстового редактора для файл sudoers, который проверяет файл на корректность перед записью</p>
<p>sudo -l - запрос возможностей текущего пользователя
sudo -l -U - запрос возможностей определенного пользователя
sudo -i - залогинится под другим пользователем (=su)</p>
<p>Общий вид правил в sudoers:
USER PLACE=(RUNAS) COMMAND
USER PLACE=(RUNAS) NOPASSWD: COMMAND
где:
USER и RUNAS - имя пользователя, UID или USER_ALIAS
PLACE - имя хоста, имя домена, IP адрес, PLACE_ALIAS
COMMAND - исполняемый файл или COMMAND_ALIAS. Разрешается перечислить несколько команд через запятую
Команды
whoami - определение имени текущего пользователя
id - определение сведений о пользователе
groups - перечень групп пользователя</p>
<p>chmod — изменяет права доступа к файлу
chown — изменяет владельца файла
chgrp — изменяет группу файла
chage - назначение времени устаревания пароля
chsh - смена оболочки пользователя путем выбор из файла /etc/shells
newgrp - залогинится в новую группу
login - начать сессию пользователя в системе
who / w / users - кто сейчас работает
last — история аутентификации пользователей
su - запустить оболочку от имени другого пользователя. Если текущий пользователь root, то пароль не запрашивается. В остальных случаях запрашивается пароль целевого пользователя.
sudo - выполнить одно действие от другого пользователя. Не установлен по-умолчанию в Debian, ArchLinux, CentOS, Fedora.</p>
<p>Типы файлов</p>
<ul>
<li>regular file (обычный файл)
d directory (каталоги)
l link (символическая ссылка)
c character device (символьное устройство)
b block device (блочное устройство)
p named pipe (именованный канал для межпроцессного обмена данными)
s UNIX socket (UNIX сокет для межпроцессного обмена данными)
Дополнительные сведения
Хеш-функции позволяют поставить в соответствие каким-либо данным (ключ) значение фиксированной длины (хеш). По хешу невозможно однозначно определить ключ.
На практике хеш-функции используются для:
определения целостности данных
в цифровых подписях
при передаче данных
при хранении данных на ненадежном носителе
хеш-таблиц - специальных структурах данных, позволяющих упростить и ускорить доступа к данным в программном обеспечении
C# - тип данных Hashtable
Java - тип данных HashMap
Python - тип данных dict
для создания функций формирования ключа</li>
</ul>
<p>Широко известные хеш-функции:
MD5
RIPEMD-160
SHA-1
SHA-2 (SHA-224, SHA-256, SHA-384, SHA-512)
SHA-3 (Keccak, SHA3-224, SHA3-256, SHA3-384, SHA3-512)
Whirlpool
BLAKE2
Blowfish</p>
<p>Функция формирования ключа (key derivation function, KDF) — это функция, формирующая один или несколько секретных ключей на основе секретного значения и случайного (псевдослучайного) значения.</p>
<p>Входным секретным значением может быть:
пароль
закрытый ключ асимметричного шифрования</p>
<p>Случайное (псевдослучайного) значение в функциях формирования ключа не является секретным и часто называется «соль». Использование соли позволяет предотвратить атаки с помощью rainbow-table.</p>
<p>Функции формирования ключа используются для:
аутентификации пользователей
формирования ключей шифрования симметричного шифрования (например AES)</p>
<p>Часто использующиеся функции формирования ключа:
bcrypt
PBKDF2
scrypt
argon2</p>
<p>Функции формирования ключа часто используют параметры позволяющие регулировать необходимые
трудоемкость
количество памяти
степень параллелизма
для их реализации. Это позволяет предотвратить атаки типа bruteforce.</p></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/linux/users","query":{},"buildId":"LUG9vo4cHsjOtBLj04oqM","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>