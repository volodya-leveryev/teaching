<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-0d1b80a048d4787e.js"></script><script src="/_next/static/chunks/webpack-05b8c18cdbe0b397.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-2043948c1246ba90.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9538641435026bd3.js" defer=""></script><script src="/_next/static/chunks/pages/windows/theory_ad-9e42694e819f874f.js" defer=""></script><script src="/_next/static/LUG9vo4cHsjOtBLj04oqM/_buildManifest.js" defer=""></script><script src="/_next/static/LUG9vo4cHsjOtBLj04oqM/_ssgManifest.js" defer=""></script></head><body><div id="__next"><h1>Windows: Active Directory</h1>
<p>Active Directory (AD) --- это специализированная БД, которая хранит данные о:</p>
<ul>
<li>пользователях предприятия;</li>
<li>компьютерах;</li>
<li>сетевых принтерах;</li>
<li>общих ресурсах в сети;</li>
<li>и др. объектах в сети.</li>
</ul>
<p>Контроллер AD --- Windows Server с установленной и настроенной AD DS (Active Directory Domain Services).</p>
<p>Рекомендует иметь как минимум 2 контроллера AD в одной локальной сети, причем они не должны располагаться на одном физическом сервере.</p>
<p>Работа AD существенно нагружает сервер. Поэтому не рекомендуется устанавливать другие роли, которые требуют значительных системных ресурсов (Remote Desktop Services, Windows System Update Service, Windows Deployment Services и т.д.).</p>
<p>Контроллеры AD тесно интегрируются с DNS. Это позволяет компьютерам быстро находить контроллеры AD (тип записей SRV) и другие ресурсы в сети.</p>
<p>Объекты в AD группируются в домены. Пример имени домена: <code>contoso.com</code>. Дочерние домены:</p>
<ul>
<li><code>webservices.contoso.com</code></li>
<li><code>it.contoso.com</code></li>
<li><code>accounting.contoso.com</code></li>
</ul>
<p>Дерево доменов --- это набор из корневого домена и его дочерних доменов.</p>
<p>Несколько деревьев доменов, которые доверяют друг другу, образуют лес.</p>
<p>Объекты в AD реплицируются между контроллерами AD в пределах одного домена.</p>
<p>Администратор леса настраивает обмен данными между доменами в лесу.</p>
<p>RODC --- Read-Only Domain Controller --- специализированный контроллер домена на котором невозможно создать новые объекты AD.</p>
<p>Каждый объект в AD относиться к какому-либо классу (пользователь, компьютер и т.д.). В зависимости от этого, у объекта имеется тот или иной набор атрибутов. Часто атрибуты имеют сокращённое название:</p>
<ul>
<li><code>CN</code> --- common name</li>
<li><code>DC</code> --- domain component</li>
<li><code>OU</code> --- organization unit</li>
</ul>
<p>Объекты могут иметь несколько значений для одного и того же атрибута. При этом, имеет значение порядок следования этих значений. Пример: <code>CN=user,DC=corp,DC=fiit,DC=ru</code>.</p>
<p>У каждого объекта должно быть уникальное (отличительное) имя --- Distinguished Name --- по которому его можно однозначно найти в AD.</p>
<p>Схема AD --- метаинформация о структуре объектов в AD. Схема AD единая для всего леса.</p>
<p>В лесу обязательно есть один (и только один) контроллер домена на котором можно внести изменения в схему AD. Он называется хозяин схемы (Master Schema).</p>
<p>Роль хозяина схемы может быть передана, или если текущий хозяин схемы недоступен, то она может быть перехвачена.</p>
<p>В AD происходит безопасная проверка пароля пользователя на контроллере AD с помощью протокола Kerberos. На клиентском компьютере после введения в AD
сохраняются локальные пользователи. Таким образом на любом компьютере в AD существует два набора пользователей:</p>
<ul>
<li>доменные пользователи (из AD);</li>
<li>локальные.</li>
</ul>
<p>Пользователь домена AD может быть идентифицирован двумя способами:</p>
<ul>
<li>с помощью NETBIOS-имени домена: <code>CONTOSO\ivanov</code>;</li>
<li>с помощью имени домена: <code>ivanov@contoso.com</code>.</li>
</ul>
<p>Локальный пользователь идентифицируется с помощью NETBIOS-имени компьютера: <code>COMP\ivanov</code>.</p>
<p>Глобальный каталог --- роль контроллера домена, которая позволяет хранить данные других доменов из нашего леса для ускорения доступа к ним.</p>
<p>SID --- Security identifier --- внутренний идентификатор безопасности, который присваивается пользователям и компьютерам.</p>
<p>SID --- уникален для каждого вновь создаваемого объекта.</p>
<p>Права на доступ назначаются для SID-ов.</p>
<p>Группа безопасности --- группы в которые входят пользователи или другие группы. ГБ нужны для более гибкого назначения прав доступа.</p>
<p>Контейнер --- средство группировки объектов в AD.</p>
<p>Классы объектов в AD --- компьютеры, пользователи, и т.д. Классы объектов отличаются друг от друга набором атрибутов.</p>
<p>Подразделение (Organization Unit, OU) --- специальный контейнер который может являться субъектом GPO (Group Policy Object).</p>
<p>Сайт --- в терминах AD это область сети где все контроллеры доменов связаны быстрым, надежным и недорогим соединением. Сайты нужны для более корректной репликации данных между контроллерами доменов.</p>
<p>Средства управления AD:</p>
<ul>
<li>
<p>оснастка MMC:</p>
<ul>
<li>Пользователи и компьютеры AD, (AD Users and Computer ADUC);</li>
<li>ADSIedit.msc --- низкоуровневое редактирование объектов AD.</li>
</ul>
</li>
<li>
<p>метро-интерфейс</p>
<ul>
<li>AD Administrative Center (ADAC);</li>
<li>Центр администрирование AD.</li>
</ul>
</li>
</ul>
<p>GPO (Group Policy Object) --- набор правил определяющий поведение компьютеров в домене</p>
<ul>
<li>Управление ГП;</li>
<li>Редактор управления ГП.</li>
</ul>
<p>Существующие в AD группы безопасности:</p>
<ul>
<li>Администраторы (не в домене) --- локальная группа, которая управляет компьютером;</li>
<li>Администраторы домена --- управляет объектами в домене;</li>
<li>Администраторы предприятия --- управляет объектами в любом домене леса;</li>
<li>Администраторы схемы --- может вносить изменения в схему AD;</li>
<li>Пользователи домена.</li>
</ul>
<p>После добавления компьютера к домену распространенной практикой является добавление пользователя которому администратор доверяет в локальную группу администраторов. Таким образом данный пользователь получает право управлять данным компьютером и, например, устанавливать ПО.</p>
<p>Область распространения групп безопасности:</p>
<ul>
<li>Локальная в домене (Domain Local, DL) --- действует в пределах домена;</li>
<li>Глобальные (Global, G) --- действует в пределах леса;</li>
<li>Универсальные (Universal U) --- действуют в пределах лесов с доверительными соотношениями.</li>
</ul>
<p>Рекомендуемая схема назначения прав доступа к ресурсам:</p>
<ul>
<li>I  --- Identity (пользователи);</li>
<li>G  --- Global (роли пользователей);</li>
<li>DL --- Domain-Local (права доступа);</li>
<li>A  --- Access (ресурс).</li>
</ul>
<p>Задание на практику:</p>
<ul>
<li>
<p>поднять контроллер домена;</p>
</li>
<li>
<p>настроить доступ;</p>
<ul>
<li>создать 3 пользователей;</li>
<li>включить их в группу операторы архива, для того чтобы они могли аутентифицироваться на контроллере домена;</li>
<li>создать группы безопасности;</li>
<li>создать 2 общие папки;</li>
<li>настроить доступ.</li>
</ul>
</li>
<li>
<p>изменить групповую политику так, чтобы у пользователей домена назначался определенный фон рабочего стола.</p>
</li>
</ul></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/windows/theory_ad","query":{},"buildId":"LUG9vo4cHsjOtBLj04oqM","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>